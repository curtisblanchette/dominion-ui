<h3>{{state.title}}</h3>
<form [formGroup]="form" (ngSubmit)="saveData()">

  <ng-container *ngFor="let control of controlData">
    <fiiz-input *ngIf="['text','tel','email'].includes(control.type)" [type]="control.type" [id]="control.key" [label]="control.label" [placeholder]="control.label" [formControlName]="control.key"></fiiz-input>
    <fiiz-date-picker *ngIf="['day', 'daytime'].includes(control.type)" [mode]="control.type" [label]="control.label" [formControlName]="control.key"></fiiz-date-picker>
    <fiiz-select *ngIf="control.type === 'dropdown'" #dropdown [module]="control.service" [id]="control.key" [label]="control.label" [formControlName]="control.key"></fiiz-select>
  </ng-container>

  <div class="controls">
    <fiiz-button (click)="navigation.back()" type="button" class="stroked">Cancel</fiiz-button>
    <fiiz-button #submit type="submit" primary [loading]="loading$ | async" [disabled]="(loading$ | async) || form.invalid">{{submitText}}</fiiz-button>
  </div>

</form>
