<ng-container [ngTemplateOutlet]="(loading$ | async) ? loading : main"
              [ngTemplateOutletContext]="{loadingText: 'Loading...'}"></ng-container>

<ng-template #main>

    <h3>{{state.title}}</h3>
    <form [formGroup]="form" (ngSubmit)="saveData()">

      <ng-container *ngFor="let control of controlData">
        <fiiz-input *ngIf="['text','tel'].includes(control.type)" [type]="control.type" [id]="control.key" [label]="control.label" [placeholder]="control.label" [formControlName]="control.key"></fiiz-input>
        <fiiz-select *ngIf="control.type === 'dropdown'" #dropdown [module]="control.service" [id]="control.key" [label]="control.label" [formControlName]="control.key"></fiiz-select>
      </ng-container>

      <div class="controls">
        <button (click)="navigation.back()" type="button">Cancel</button>
        <input type="submit" class="primary" [value]="buttonTitle" [disabled]="!this.form.valid">
      </div>

    </form>

</ng-template>

<ng-template #loading>Loading...</ng-template>
