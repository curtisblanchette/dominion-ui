<header>
  <div class="navbar__header">
    <a routerLink="/dashboard">
      <img src="../../../../../assets/img/logo@1x.png" alt="4iiz Logo"/>
    </a>
    <div class="acting-for" *ngIf="actingFor$ | async">{{(actingFor$ | async).label}}</div>
  </div>

  <nav>
    <ng-container *ngIf="!isMobile">

      <ng-container *ngFor="let item of menu">

        <button routerLinkActive="active" [routerLink]="item.path" #link *ngIf="!item.children">{{item.name}}</button>

        <ng-container *ngIf="item.children?.length > 0">
          <div #link style="position: relative;" routerLinkActive="active"  >
            <button [routerLink]="item.path" (click)="item.open = !item.open">{{item.name}}</button>
            <div class="nav-dropdown-menu" [ngClass]="{ 'open': item.open }">
              <button class="full-width" [routerLink]="child.path" (click)="item.open = false" *ngFor="let child of item.children">{{child.name}}</button>
            </div>
          </div>

        </ng-container>

      </ng-container>

      <div class="active-underline" #activeUnderline></div>
    </ng-container>

    <ng-container *ngIf="isMobile">
      <button cdkOverlayOrigin #trigger="cdkOverlayOrigin" (click)="menuOpen = !menuOpen"><i class="fa fa-bars"></i></button>

      <ng-template cdkConnectedOverlay cdkConnectedOverlayPanelClass="mobile-menu" (overlayOutsideClick)="menuOpen = false" [cdkConnectedOverlayOrigin]="trigger" [cdkConnectedOverlayOpen]="menuOpen" class="test">
        <nav class="mobile-nav-container">
          <ng-container *ngFor="let item of menu">
            <button routerLinkActive="active" (click)="menuOpen = false" [routerLink]="item.path" #link >{{item.name}}</button>
          </ng-container>

        </nav>
      </ng-template>
    </ng-container>
  </nav>
</header>





