<div class="page-heading">
  <h2 class="page-heading__title">Outcome Form</h2>
</div>

<div class="page-content">

  <div class="fields" *ngIf="allLoaded">
      <fiiz-data [module]="ModuleTypes.CONTACT" [data]="{id: contactId}" [options]="contactOptions"></fiiz-data>
      <fiiz-data [module]="ModuleTypes.EVENT" [data]="{id: id}" [options]="eventOptions"></fiiz-data>
      <div class="button-control">
        <fiiz-button (click)="navigation.back()" type="button" class="stroked">Back</fiiz-button>
        <fiiz-button primary type="button" (click)="updateEvent()" [disabled]="!formIsValid" >Update Event</fiiz-button>
      </div>
  </div>

  <div class="notes">
    <h3>History</h3>
    <ng-container *ngIf="notesFetched">
      <div class="notes__master" *ngFor="let note of notes">
        <div class="notes__wrapper">
          <i class="notes__wrapper__icon fa" [ngClass]="{'fa-phone' : note.noteFor == 'call', 'fa-calendar' : note.noteFor == 'event' }"></i> &nbsp;     
          <span class="notes__wrapper__title" *ngIf="note.noteFor == 'call'" >{{note.direction | titlecase}} Call</span>
          <span class="notes__wrapper__title" *ngIf="note.noteFor == 'event'" >{{note.type}}</span>
          <time class="notes__wrapper__time" [dateTime]="note.createdAt" >{{ note.createdAt | date:'medium'}}</time>
        </div>
        <div class="notes__content" [innerHTML]="note.content"></div>
      </div>
      <h4 *ngIf="notes.length === 0" >No Historical Notes record avaialble for this Contact</h4>
    </ng-container>    
  </div>

</div>

