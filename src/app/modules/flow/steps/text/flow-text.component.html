<div *ngIf="data">

  <ng-container [ngSwitch]="data.template">
    <ng-template [ngSwitchCase]="'call-type'" >
      <h3 class="title">{{data.title}}</h3>
      <p>{{data.body}}</p>
      <form [formGroup]="form" *ngIf="form">
        <fiiz-radio [items]="callTypes$" formControlName="call_type" name="call_type"></fiiz-radio>
      </form>
    </ng-template>

    <ng-template [ngSwitchCase]="'web-lead'">
      <h3 class="title">{{data.title}}</h3>
      <p>{{data.body}}</p>

      <form [formGroup]="form" *ngIf="form">
        <fiiz-radio [items]="webLeadTypes$" formControlName="web_lead_options" name="web_lead_options"></fiiz-radio>
      </form>
    </ng-template>

    <ng-template [ngSwitchCase]="'relationship-building'">
      <h3 class="title">{{data.title}}</h3>
      <p style="text-align: center;">{{data.body}}</p>


      <p class="dictation">Excellent, so you were telling me your case is regarding...</p>
      <p class="dictation">Fantastic, and which city are you calling from today?</p>
      <fiiz-data [module]="ModuleTypes.LEAD" [data]="{resolveId: 'lead'}" [options]="{state: 'edit', fields: ['practiceAreaId', 'state']}"></fiiz-data>
      <!-- <fiiz-data [module]="ModuleTypes.ADDRESS" [data]="{id: undefined}" [options]="{state: 'edit', fields: ['stateCode']}"></fiiz-data> -->

<!--      <p style="text-align: center;">Remember to respond appropriately after they share their story in order to build a relationship based on the information that they share!</p>-->

      <p class="dictation">Do you have a few minutes so that I can ask you some questions to see how we might be able to help you?</p>
    </ng-template>

    <ng-template [ngSwitchCase]="'power-question'">
      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Accusamus amet aperiam autem, dolore dolorem eum explicabo laborum maiores quae quasi! Animi corporis dolorum eum expedita iste placeat sapiente tenetur vel!</p>
    </ng-template>

    <ng-template [ngSwitchCase]="'recap'" >

      <div style="display: flex; flex-direction: row;">
        <div style="flex:1;">
          <p class="dictation">We will be sending information before, during the process and at the end of the process, so it is important that we verify the email.</p>
          <div class="appointment-time">
            <i class="fa fa-calendar-alt"></i>
            <div>{{ (vars$ | async)?.appt_start_time | date : 'longDate' }} at {{ (vars$ | async)?.appt_start_time | date : 'shortTime' }}</div>
          </div>
          <p class="dictation">Here's the deal. At your consult, you will need to make a decision. Either you will decide to do nothing and keep your life the same as it is today, or you will choose one of the paths we identify to make your life better</p>
          <p class="dictation">We always suggest that you bring some money to start the process; whatever is in your possibilities. Are there any family members or friends who must be involved to help you decide on how you are going to make your life better?</p>
        </div>
        <div style="flex: 1;">
            <fiiz-data #contactForm [module]="ModuleTypes.CONTACT" [data]="{ id: (vars$ | async)?.contact }" [options]="{state: 'edit', fields: ['email', 'phone'] }"></fiiz-data>
            <fiiz-data #addressForm [module]="ModuleTypes.ADDRESS" [data]="{ id: (vars$ | async)?.address }" [options]="{state: addressState, fields: ['line1', 'line2', 'city', 'stateCode', 'zipCode', 'countryCode'] }"></fiiz-data>
        </div>
      </div>
    </ng-template>

    <ng-template [ngSwitchCase]="'end'">
      <p>All information for this call has been captured. Thank you!</p>
      <fiiz-button primary (click)="endCall()">End Call</fiiz-button>
    </ng-template>


    <ng-template [ngSwitchCase]="'reason-for-call'">
      <h3 class="title">{{data.title}}</h3>
      <p>{{data.body}}</p>

      <form [formGroup]="form" *ngIf="form">
        <fiiz-radio [items]="callReasons$" formControlName="call_reason" name="call_reason"></fiiz-radio>
      </form>
    </ng-template>

    <ng-template [ngSwitchCase]="'follow-up-script'">
      <h3 class="title">{{data.title}}</h3>
      <p>{{data.body}}</p>

      <form [formGroup]="form" *ngIf="form">
        <fiiz-radio [items]="answerOptions$" formControlName="answered" name="answered"></fiiz-radio>


        <ng-container [ngSwitch]="form.controls['answered'].value">
          <ng-template ngSwitchCase="yes">
            <p class="dictation">Hello how are you, am I speaking with {{'contact.name'}}? This is {{(flowService.user$ | async)?.fullName}} from {{'company.name'}}. I called you because the consultant (name of the consultant assigned to the office they were scheduled to) saw that he could not reach your appointment you had set and we wanted to know if everything was okay?</p>
            <p class="dictation">The best way to help you is, if we set you up with another appointment and I will be more than glad to set another one.</p>
            <fiiz-radio [items]="callOutcomes$" formControlName="call_outcome" name="call_outcome"></fiiz-radio>
          </ng-template>
          <ng-template ngSwitchCase="no"></ng-template>
          <ng-template ngSwitchCase="leaving-message"></ng-template>
          <ng-template [ngSwitchCase]="'bad-number' || 'wrong-number' || 'not-working'"></ng-template>

        </ng-container>

      </form>
    </ng-template>



    <ng-template ngSwitchDefault>This would be a default template</ng-template>
  </ng-container>


</div>
