<ng-container *ngIf="!isLoading" [ngTemplateOutlet]="getTemplate() || loadingTemplate" [ngTemplateOutletContext]="{loadingText: loadingMessage}"></ng-container>

<ng-template #loginTemplate>
  <form [formGroup]="loginForm" (ngSubmit)="login()" id="login-form" >
    <img src="assets/img/symbolmark-light-transparent.png" alt="4iiz Logo">
    <fiiz-input
      id="username"
      formControlName="username"
      type="text"
      placeholder="Username">
    </fiiz-input>

    <fiiz-input
      id="password"
      formControlName="password"
      placeholder="Password"
      type="password"
      required
      minlength="12">
    </fiiz-input>

    <input type="submit" class="primary large" value="Let's Go!" [disabled]="disable" >

    <!-- <button class="forgot-password transparent large" type="button" (click)="updateShowForm('forgot-password')">Forgot password?</button> -->
    <div style="color:red; margin: 0 0 0 54px;" *ngIf="hasError">{{errorMessage}}</div>
  </form>
</ng-template>

<ng-template #newUserTemplate>
  <form (ngSubmit)="createUser()" [formGroup]="newUserForm" id="new-user-form" name="new-user-form">

    <ng-container [ngTemplateOutlet]="isLoading ? loadingTemplate : newUserTemplate"
                  [ngTemplateOutletContext]="{loadingText: 'Checking Invitation...'}"></ng-container>

    <ng-template #newUserTemplate>
      <h2>New User</h2>

      <fiiz-input
        formControlName="email"
        type="text"
        placeholder="Email Address">
      </fiiz-input>

      <fiiz-input
        formControlName="firstName"
        type="text"
        placeholder="First Name">
      </fiiz-input>

      <fiiz-input
        formControlName="lastName"
        type="text"
        placeholder="Last Name">
      </fiiz-input>

      <fiiz-input
        formControlName="password"
        type="password"
        placeholder="Password"
        required
        minlength="12">
      </fiiz-input>

      <fiiz-input
        formControlName="confirmPassword"
        type="password"
        placeholder="Confirm Password"
        required
        minlength="12">
      </fiiz-input>

      <input type="submit"
             class="primary"
             id="create-user-btn"
             value="Complete Registration"
             [disabled]="disable">

    </ng-template>


  </form>
</ng-template>



<ng-template #loadingTemplate let-loadingText="loadingText">
  <app-loading>{{loadingText}}</app-loading>
</ng-template>


